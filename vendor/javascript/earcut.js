// earcut@3.0.2 downloaded from https://ga.jspm.io/npm:earcut@3.0.2/src/earcut.js

function t(t,n,x=2){const i=n&&n.length;const l=i?n[0]*x:t.length;let o=e(t,0,l,x,true);const f=[];if(!o||o.next===o.prev)return f;let s,c,y;i&&(o=u(t,n,o,x));if(t.length>80*x){s=t[0];c=t[1];let e=s;let n=c;for(let r=x;r<l;r+=x){const x=t[r];const i=t[r+1];x<s&&(s=x);i<c&&(c=i);x>e&&(e=x);i>n&&(n=i)}y=Math.max(e-s,n-c);y=y!==0?32767/y:0}r(o,f,x,s,c,y,0);return f}function e(t,e,n,r,x){let i;if(x===E(t,e,n,r)>0)for(let x=e;x<n;x+=r)i=A(x/r|0,t[x],t[x+1],i);else for(let x=n-r;x>=e;x-=r)i=A(x/r|0,t[x],t[x+1],i);if(i&&g(i,i.next)){B(i);i=i.next}return i}function n(t,e){if(!t)return t;e||(e=t);let n,r=t;do{n=false;if(r.steiner||!g(r,r.next)&&m(r.prev,r,r.next)!==0)r=r.next;else{B(r);r=e=r.prev;if(r===r.next)break;n=true}}while(n||r!==e);return e}function r(t,e,u,f,s,c,y){if(!t)return;!y&&c&&p(t,f,s,c);let h=t;while(t.prev!==t.next){const p=t.prev;const v=t.next;if(c?i(t,f,s,c):x(t)){e.push(p.i,t.i,v.i);B(t);t=v.next;h=v.next}else{t=v;if(t===h){if(y)if(y===1){t=l(n(t),e);r(t,e,u,f,s,c,2)}else y===2&&o(t,e,u,f,s,c);else r(n(t),e,u,f,s,c,1);break}}}}function x(t){const e=t.prev,n=t,r=t.next;if(m(e,n,r)>=0)return false;const x=e.x,i=n.x,l=r.x,o=e.y,u=n.y,f=r.y;const s=Math.min(x,i,l),c=Math.min(o,u,f),y=Math.max(x,i,l),p=Math.max(o,u,f);let h=r.next;while(h!==e){if(h.x>=s&&h.x<=y&&h.y>=c&&h.y<=p&&w(x,o,i,u,l,f,h.x,h.y)&&m(h.prev,h,h.next)>=0)return false;h=h.next}return true}function i(t,e,n,r){const x=t.prev,i=t,l=t.next;if(m(x,i,l)>=0)return false;const o=x.x,u=i.x,f=l.x,s=x.y,c=i.y,y=l.y;const p=Math.min(o,u,f),h=Math.min(s,c,y),a=Math.max(o,u,f),Z=Math.max(s,c,y);const M=v(p,h,e,n,r),g=v(a,Z,e,n,r);let d=t.prevZ,z=t.nextZ;while(d&&d.z>=M&&z&&z.z<=g){if(d.x>=p&&d.x<=a&&d.y>=h&&d.y<=Z&&d!==x&&d!==l&&w(o,s,u,c,f,y,d.x,d.y)&&m(d.prev,d,d.next)>=0)return false;d=d.prevZ;if(z.x>=p&&z.x<=a&&z.y>=h&&z.y<=Z&&z!==x&&z!==l&&w(o,s,u,c,f,y,z.x,z.y)&&m(z.prev,z,z.next)>=0)return false;z=z.nextZ}while(d&&d.z>=M){if(d.x>=p&&d.x<=a&&d.y>=h&&d.y<=Z&&d!==x&&d!==l&&w(o,s,u,c,f,y,d.x,d.y)&&m(d.prev,d,d.next)>=0)return false;d=d.prevZ}while(z&&z.z<=g){if(z.x>=p&&z.x<=a&&z.y>=h&&z.y<=Z&&z!==x&&z!==l&&w(o,s,u,c,f,y,z.x,z.y)&&m(z.prev,z,z.next)>=0)return false;z=z.nextZ}return true}function l(t,e){let r=t;do{const n=r.prev,x=r.next.next;if(!g(n,x)&&d(n,r,r.next,x)&&I(n,x)&&I(x,n)){e.push(n.i,r.i,x.i);B(r);B(r.next);r=t=x}r=r.next}while(r!==t);return n(r)}function o(t,e,x,i,l,o){let u=t;do{let t=u.next.next;while(t!==u.prev){if(u.i!==t.i&&M(u,t)){let f=q(u,t);u=n(u,u.next);f=n(f,f.next);r(u,e,x,i,l,o,0);r(f,e,x,i,l,o,0);return}t=t.next}u=u.next}while(u!==t)}function u(t,n,r,x){const i=[];for(let r=0,l=n.length;r<l;r++){const o=n[r]*x;const u=r<l-1?n[r+1]*x:t.length;const f=e(t,o,u,x,false);f===f.next&&(f.steiner=true);i.push(a(f))}i.sort(f);for(let t=0;t<i.length;t++)r=s(i[t],r);return r}function f(t,e){let n=t.x-e.x;if(n===0){n=t.y-e.y;if(n===0){const r=(t.next.y-t.y)/(t.next.x-t.x);const x=(e.next.y-e.y)/(e.next.x-e.x);n=r-x}}return n}function s(t,e){const r=c(t,e);if(!r)return e;const x=q(r,t);n(x,x.next);return n(r,r.next)}function c(t,e){let n=e;const r=t.x;const x=t.y;let i=-Infinity;let l;if(g(t,n))return n;do{if(g(t,n.next))return n.next;if(x<=n.y&&x>=n.next.y&&n.next.y!==n.y){const t=n.x+(x-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(t<=r&&t>i){i=t;l=n.x<n.next.x?n:n.next;if(t===r)return l}}n=n.next}while(n!==e);if(!l)return null;const o=l;const u=l.x;const f=l.y;let s=Infinity;n=l;do{if(r>=n.x&&n.x>=u&&r!==n.x&&Z(x<f?r:i,x,u,f,x<f?i:r,x,n.x,n.y)){const e=Math.abs(x-n.y)/(r-n.x);if(I(n,t)&&(e<s||e===s&&(n.x>l.x||n.x===l.x&&y(l,n)))){l=n;s=e}}n=n.next}while(n!==o);return l}function y(t,e){return m(t.prev,t,e.prev)<0&&m(e.next,t,t.next)<0}function p(t,e,n,r){let x=t;do{x.z===0&&(x.z=v(x.x,x.y,e,n,r));x.prevZ=x.prev;x.nextZ=x.next;x=x.next}while(x!==t);x.prevZ.nextZ=null;x.prevZ=null;h(x)}function h(t){let e;let n=1;do{let r=t;let x;t=null;let i=null;e=0;while(r){e++;let l=r;let o=0;for(let t=0;t<n;t++){o++;l=l.nextZ;if(!l)break}let u=n;while(o>0||u>0&&l){if(o!==0&&(u===0||!l||r.z<=l.z)){x=r;r=r.nextZ;o--}else{x=l;l=l.nextZ;u--}i?i.nextZ=x:t=x;x.prevZ=i;i=x}r=l}i.nextZ=null;n*=2}while(e>1);return t}function v(t,e,n,r,x){t=(t-n)*x|0;e=(e-r)*x|0;t=16711935&(t|t<<8);t=252645135&(t|t<<4);t=858993459&(t|t<<2);t=1431655765&(t|t<<1);e=16711935&(e|e<<8);e=252645135&(e|e<<4);e=858993459&(e|e<<2);e=1431655765&(e|e<<1);return t|e<<1}function a(t){let e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e);e=e.next}while(e!==t);return n}function Z(t,e,n,r,x,i,l,o){return(x-l)*(e-o)>=(t-l)*(i-o)&&(t-l)*(r-o)>=(n-l)*(e-o)&&(n-l)*(i-o)>=(x-l)*(r-o)}function w(t,e,n,r,x,i,l,o){return!(t===l&&e===o)&&Z(t,e,n,r,x,i,l,o)}function M(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!k(t,e)&&(I(t,e)&&I(e,t)&&j(t,e)&&(m(t.prev,t,e.prev)||m(t,e.prev,e))||g(t,e)&&m(t.prev,t,t.next)>0&&m(e.prev,e,e.next)>0)}function m(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function g(t,e){return t.x===e.x&&t.y===e.y}function d(t,e,n,r){const x=b(m(t,e,n));const i=b(m(t,e,r));const l=b(m(n,r,t));const o=b(m(n,r,e));return x!==i&&l!==o||(!(x!==0||!z(t,n,e))||(!(i!==0||!z(t,r,e))||(!(l!==0||!z(n,t,r))||!(o!==0||!z(n,e,r)))))}function z(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function b(t){return t>0?1:t<0?-1:0}function k(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&d(n,n.next,t,e))return true;n=n.next}while(n!==t);return false}function I(t,e){return m(t.prev,t,t.next)<0?m(t,e,t.next)>=0&&m(t,t.prev,e)>=0:m(t,e,t.prev)<0||m(t,t.next,e)<0}function j(t,e){let n=t;let r=false;const x=(t.x+e.x)/2;const i=(t.y+e.y)/2;do{n.y>i!==n.next.y>i&&n.next.y!==n.y&&x<(n.next.x-n.x)*(i-n.y)/(n.next.y-n.y)+n.x&&(r=!r);n=n.next}while(n!==t);return r}function q(t,e){const n=C(t.i,t.x,t.y),r=C(e.i,e.x,e.y),x=t.next,i=e.prev;t.next=e;e.prev=t;n.next=x;x.prev=n;r.next=n;n.prev=r;i.next=r;r.prev=i;return r}function A(t,e,n,r){const x=C(t,e,n);if(r){x.next=r.next;x.prev=r;r.next.prev=x;r.next=x}else{x.prev=x;x.next=x}return x}function B(t){t.next.prev=t.prev;t.prev.next=t.next;t.prevZ&&(t.prevZ.nextZ=t.nextZ);t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function C(t,e,n){return{i:t,x:e,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:false}}function D(t,e,n,r){const x=e&&e.length;const i=x?e[0]*n:t.length;let l=Math.abs(E(t,0,i,n));if(x)for(let r=0,x=e.length;r<x;r++){const i=e[r]*n;const o=r<x-1?e[r+1]*n:t.length;l-=Math.abs(E(t,i,o,n))}let o=0;for(let e=0;e<r.length;e+=3){const x=r[e]*n;const i=r[e+1]*n;const l=r[e+2]*n;o+=Math.abs((t[x]-t[l])*(t[i+1]-t[x+1])-(t[x]-t[i])*(t[l+1]-t[x+1]))}return l===0&&o===0?0:Math.abs((o-l)/l)}function E(t,e,n,r){let x=0;for(let i=e,l=n-r;i<n;i+=r){x+=(t[l]-t[i])*(t[i+1]+t[l+1]);l=i}return x}function F(t){const e=[];const n=[];const r=t[0][0].length;let x=0;let i=0;for(const l of t){for(const t of l)for(let n=0;n<r;n++)e.push(t[n]);if(i){x+=i;n.push(x)}i=l.length}return{vertices:e,holes:n,dimensions:r}}export{t as default,D as deviation,F as flatten};

